(this["webpackJsonpmeeting-display-frontend"]=this["webpackJsonpmeeting-display-frontend"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(7),c=n.n(s),i=(n(14),n(5)),u=n.n(i),o=n(8),l=n(1),m=n(2),h=n(4),v=n(3),p=(n(16),function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={time:a.currentTime()},a}return Object(m.a)(n,[{key:"checkTime",value:function(e){return e<10?"0"+e:e}},{key:"currentTime",value:function(){var e=new Date;return this.checkTime(e.getHours())+":"+this.checkTime(e.getMinutes())}},{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"tick",value:function(){this.setState({time:this.currentTime()})}},{key:"render",value:function(){return r.a.createElement("span",{className:"clock"},this.state.time)}}]),n}(r.a.Component)),y=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e="status status-"+this.props.status.toLowerCase();return r.a.createElement("header",{className:"meeting-status"},r.a.createElement("div",{className:e}),r.a.createElement("h1",null,this.props.status),r.a.createElement("p",null,this.props.summary),r.a.createElement("h2",null,r.a.createElement(p,null)))}}]),n}(r.a.Component),f=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=[];return this.props.events.forEach((function(t){e.push(r.a.createElement("li",{key:t.time+Math.random()},r.a.createElement("span",null,t.time),t.summary))})),r.a.createElement("ul",null,e)}}]),n}(r.a.Component),d=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"getYMD",value:function(e){return"".concat(this.checkTime(e.getFullYear())).concat(this.checkTime(e.getMonth())).concat(this.checkTime(e.getDate()))}},{key:"checkTime",value:function(e){return e<10?"0"+e:e}},{key:"yMDToDate",value:function(e){var t=parseInt(e.substr(0,4)),n=parseInt(e.substr(4,2)),a=parseInt(e.substr(6));return new Date(t,n,a,0,0,0,0)}},{key:"render",value:function(){var e=[],t=new Date(Date.now()),n=new Date(t.getTime());n.setDate(t.getDate()+1);var a=new Date(t.getTime());a.setDate(t.getDate()+7),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);var s=this.getYMD(t),c=this.getYMD(n),i=this.props.name;if(i===c)e.push(r.a.createElement("h3",{key:"Tomorrow"},"Tomorrow"));else if(i!==s){var u,o=this.yMDToDate(i);if(o.getTime()<a.getTime()){u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o.getDay()]}else{u="".concat(o.getDate()).concat(function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(o.getDate())," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()])}e.push(r.a.createElement("h3",{key:u},u))}var l=this.props.events;return e.push(r.a.createElement(f,{key:i+"Events",events:l})),r.a.createElement("div",null,e)}}]),n}(r.a.Component),k=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=[];this.props.list&&Object.keys(this.props.list).forEach((function(n){t.push(r.a.createElement(d,{key:n,name:n,events:e.props.list[n]}))}));return r.a.createElement("section",{id:"timeline"},t)}}]),n}(r.a.Component),D=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).backendUrl="http://localhost:4567",a.tickRate=1e4,a.timerID=null,a.datesAreOnSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},a.state={status:"Updating",summary:"Please wait...",eventsList:{}},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),this.tickRate),this.tick()}},{key:"componentWillUnmount",value:function(){this.timerID=null}},{key:"tick",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,a,r,s,c,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.backendUrl);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.events,r=Date.now(),s=a.find((function(e){var t=Date.parse(e.start),n=Date.parse(e.end);return t<r&&n>r})),c=a.find((function(e){return Date.parse(e.start)>r})),i=null==s?"Available":"Busy",o=this.generateSummary(i,c),l=this.generateEventsList(a),this.setState({status:i,summary:o,eventsList:l});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateSummary",value:function(e,t){if(null==t)return"";var n="Available"===e?"Next meeting ":"Next free ",a=new Date(Date.now()),r=new Date(a.getTime());r.setDate(a.getDate()+1);var s=new Date(Date.parse(t.start)),c=this.datesAreOnSameDay(a,s),i=this.datesAreOnSameDay(r,s),u="".concat(this.checkTime(s.getHours()),":").concat(this.checkTime(s.getMinutes())),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s.getDay()];return i&&(n+="tomorrow "),c||i||(n+="on ".concat(o," ")),n+="at ".concat(u)}},{key:"generateEventsList",value:function(e){var t=this,n=new Date(Date.now());new Date(n.getTime()).setDate(n.getDate()+1);var a={};return e.forEach((function(e){var n=new Date(Date.parse(e.start)),r=new Date(Date.parse(e.end)),s=t.getYMD(n),c={time:"".concat(t.checkTime(n.getHours()),":").concat(t.checkTime(n.getMinutes())," - ").concat(t.checkTime(r.getHours()),":").concat(t.checkTime(r.getMinutes())),summary:e.summary};a[s]=a[s]||[],a[s].push(c)})),a}},{key:"getYMD",value:function(e){return"".concat(this.checkTime(e.getFullYear())).concat(this.checkTime(e.getMonth())).concat(this.checkTime(e.getDate()))}},{key:"checkTime",value:function(e){return e<10?"0"+e:e}},{key:"render",value:function(){return r.a.createElement("div",{id:"App"},r.a.createElement(y,{status:this.state.status,summary:this.state.summary}),r.a.createElement(k,{list:this.state.eventsList}))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.ef83d83d.chunk.js.map